(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{62170:function(e,a,t){"use strict";t.d(a,{YG:function(){return l},gy:function(){return s},o4:function(){return r}});var n=t(96245);function r(e){localStorage.setItem("access_token",e)}function l(){var e=localStorage.getItem("access_token");return e?(0,n.Z)(e):null}function s(){localStorage.removeItem("access_token")}},96616:function(e,a,t){"use strict";t.r(a);var n=t(50029),r=t(8307),l=t(79760),s=t.n(l),c=t(64687),o=t.n(c),m=t(67294),i=t(41664),d=t.n(i),u=t(25675),b=t.n(u),p=t(62170),f=t(11163);function v(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function E(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?v(Object(t),!0).forEach(function(a){(0,r.Z)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}a.default=function(){var e,a=(0,f.useRouter)(),t=(0,m.useState)(null),l=t[0],c=t[1],i=(0,m.useState)(!1),u=i[0],v=i[1],g=(0,m.useState)(null),h=g[0],N=g[1],w=(0,m.useState)(!1),x=w[0],y=w[1],k=(0,m.useState)({name:"",email:"",password:""}),j=k[0],P=k[1],S=(0,m.useState)(!1),B=S[0],C=S[1],O=(0,m.useState)({}),_=O[0],A=O[1],D=(0,m.useState)(""),F=D[0],T=D[1],U=(0,m.useState)(""),L=U[0],Z=U[1],M=(0,m.useState)(!1),I=M[0],q=M[1],z=(0,m.useState)(""),G=z[0],J=z[1],X=(0,m.useState)(""),Y=X[0],$=X[1],R=(0,m.useState)(""),V=R[0],H=R[1];(0,m.useEffect)(function(){var e=(0,p.YG)();e&&(N(e),P({name:e.name,email:e.email}),c(e.name),y(!0))},[]);var K=function(){(0,p.gy)(),a.push("/")},Q=function(){v(!u)},W=(e=(0,n.Z)(o().mark(function e(t){var n,r,l,s;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),$(""),J(""),H(""),F){e.next=7;break}return $("Current password is required to change the password."),e.abrupt("return");case 7:return e.prev=7,e.next=10,fetch("/api/validate-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h.email,currentPassword:F})});case 10:return n=e.sent,e.next=13,n.json();case 13:if(r=e.sent,n.ok){e.next=17;break}return $(r.message||"Failed to validate password"),e.abrupt("return");case 17:if(!_.password){e.next=45;break}if(L){e.next=21;break}return J("Please confirm your new password."),e.abrupt("return");case 21:var c;if(c=_.password,/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()-_+=|\\{}[\]:;"'<>,.?/]).{8,}$/.test(c)){e.next=24;break}return J("New password must meet complexity requirements."),e.abrupt("return");case 24:if(_.password!==F){e.next=27;break}return J("New password cannot be the same as the current password."),e.abrupt("return");case 27:if(!(_.password!==L)){e.next=30;break}return J("New password and confirmation do not match."),e.abrupt("return");case 30:return e.next=32,fetch("/api/change-password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h.email,currentPassword:F,newPassword:_.password})});case 32:return l=e.sent,e.next=35,l.json();case 35:if(s=e.sent,!l.ok){e.next=44;break}H("Password has been successfully changed."),A(E(E({},_),{},{password:""})),T(""),Z(""),a.push("/"),e.next=45;break;case 44:throw Error(s.error||"Failed to update profile");case 45:e.next=50;break;case 47:e.prev=47,e.t0=e.catch(7),console.error("Error updating profile:",e.t0);case 50:case"end":return e.stop()}},e,null,[[7,47]])})),function(a){return e.apply(this,arguments)}),ee=function(){C(!0)},ea=function(){C(!1)};return I?m.createElement("div",{className:"container mt-5"},m.createElement("nav",{className:"navbar navbar-expand-lg fixed-top shadow-sm ".concat(B?"bg-hover":"bg-dark"),style:{transition:"background-color 0.3s",backgroundColor:B?"#333":"transparent"},onMouseEnter:ee,onMouseLeave:ea},m.createElement("div",{className:"container"},m.createElement(d(),{href:"/dashboard",legacyBehavior:!0},m.createElement("a",{className:"navbar-brand d-flex align-items-center"},m.createElement(b(),{src:"/logo.jpeg",alt:"Logo",width:40,height:40,className:"d-inline-block align-top rounded-circle"}),m.createElement("span",{className:"ms-2 fw-bold fs-3 text-primary"},"Astrology"))),m.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},m.createElement("span",{className:"navbar-toggler-icon"})),m.createElement("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarNav"},m.createElement("ul",{className:"jsx-278655397 navbar-nav align-items-center"},m.createElement("li",{className:"jsx-278655397 nav-item"},x?m.createElement(d(),{href:"/services",legacyBehavior:!0},m.createElement("a",{className:"jsx-278655397 nav-link fw-semibold text-light"},"Services")):m.createElement(d(),{href:"/",legacyBehavior:!0},m.createElement("a",{className:"jsx-278655397 nav-link fw-semibold text-light"},"Our Services"))),m.createElement("li",{className:"jsx-278655397 nav-item"},m.createElement(d(),{href:"/bookAppointment",legacyBehavior:!0},m.createElement("a",{className:"jsx-278655397 nav-link fw-semibold text-light"},"Book Appointment "))),m.createElement("li",{className:"jsx-278655397 nav-item"},m.createElement(d(),{href:"/bookAppointment",legacyBehavior:!0},m.createElement("a",{title:"Book Appointment","aria-label":"Book Appointment",className:"jsx-278655397 nav-link  text-dark"},m.createElement("i",{className:"jsx-278655397 fas fa-calendar-alt"})))),m.createElement(s(),{id:"278655397"},[".nav-link.jsx-278655397 i.jsx-278655397{font-size:1.2rem;color:white;margin-right:0.1rem;}"]),m.createElement("li",{className:"jsx-278655397 nav-item"},m.createElement(d(),{href:"/about",legacyBehavior:!0},m.createElement("a",{className:"jsx-278655397 nav-link fw-semibold text-light"},"About Us"))),m.createElement("li",{className:"jsx-278655397 nav-item"},m.createElement(d(),{href:"/blog",legacyBehavior:!0},m.createElement("a",{className:"jsx-278655397 nav-link fw-semibold text-light"},"Blogs"))),m.createElement("li",{className:"jsx-278655397 nav-item"},m.createElement(d(),{href:"/contactUs",legacyBehavior:!0},m.createElement("a",{className:"jsx-278655397 nav-link fw-semibold text-light"},"Contact Us"))),m.createElement("li",{className:"jsx-278655397 nav-item"},m.createElement(d(),{href:"/yourCart",legacyBehavior:!0},m.createElement("a",{className:"jsx-278655397 nav-link fw-semibold text-light"},"Cart"))),x&&m.createElement(m.Fragment,null,m.createElement("li",{className:"jsx-278655397 nav-item dropdown"},m.createElement("a",{href:"#",id:"navbarDropdown",role:"button","aria-expanded":u?"true":"false",onClick:Q,className:"jsx-278655397 "+"nav-link dropdown-toggle fw-semibold text-light ".concat(u?"show":"")},l),m.createElement("ul",{"aria-labelledby":"navbarDropdown",className:"jsx-278655397 "+"dropdown-menu dropdown-menu-end border-0 shadow ".concat(u?"show":"")},m.createElement("li",{className:"jsx-278655397"},m.createElement(d(),{href:"/edit-profile",legacyBehavior:!0},m.createElement("a",{className:"jsx-278655397 dropdown-item"},"Edit Profile"))),m.createElement("li",{className:"jsx-278655397"},m.createElement("button",{onClick:K,className:"jsx-278655397 dropdown-item"},"Logout")))))),m.createElement("form",{className:"d-flex ms-3"},m.createElement("input",{className:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"}),m.createElement("button",{className:"btn btn-outline-light",type:"submit"},"Search"))))),m.createElement("br",null),m.createElement("br",null),m.createElement("h1",null,"Edit Profile"),m.createElement("div",{className:"card mt-3 p-4"},m.createElement("form",{onSubmit:W},m.createElement("div",{className:"mb-3"},m.createElement("label",{htmlFor:"name",className:"form-label"},"Name"),m.createElement("input",{type:"text",className:"form-control",id:"name",name:"name",value:j.name,disabled:!0})),m.createElement("div",{className:"mb-3"},m.createElement("label",{htmlFor:"email",className:"form-label"},"Email address"),m.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",value:j.email,disabled:!0})),m.createElement("div",{className:"mb-3"},m.createElement("label",{htmlFor:"currentPassword",className:"form-label"},"Current Password"),m.createElement("input",{type:"password",className:"form-control ".concat(Y?"is-invalid":""),id:"currentPassword",name:"currentPassword",value:F,onChange:function(e){T(e.target.value),$("")}}),Y&&m.createElement("div",{className:"invalid-feedback"},Y)),m.createElement("div",{className:"mb-3"},m.createElement("label",{htmlFor:"password",className:"form-label"},"New Password"),m.createElement("input",{type:"password",className:"form-control ".concat(G?"is-invalid":""),id:"password",name:"password",value:_.password||"",onChange:function(e){A(E(E({},_),{},(0,r.Z)({},e.target.name,e.target.value)))}}),G&&m.createElement("div",{className:"invalid-feedback"},G)),m.createElement("div",{className:"mb-3"},m.createElement("label",{htmlFor:"confirmPassword",className:"form-label"},"Confirm New Password"),m.createElement("input",{type:"password",className:"form-control",id:"confirmPassword",name:"confirmPassword",value:L,onChange:function(e){Z(e.target.value),J("")}})),m.createElement("div",{className:"d-grid gap-2"},m.createElement("button",{type:"submit",className:"btn btn-primary"},"Update Profile"),m.createElement("button",{onClick:function(){return q(!1)},className:"btn btn-secondary"},"Cancel")),V&&m.createElement("div",{className:"alert alert-success mt-3"},V)))):m.createElement("div",{className:"container mt-5"},m.createElement("nav",{className:"navbar navbar-expand-lg fixed-top shadow-sm ".concat(B?"bg-hover":"bg-dark"),style:{transition:"background-color 0.3s",backgroundColor:B?"#333":"transparent"},onMouseEnter:ee,onMouseLeave:ea},m.createElement("div",{className:"container"},m.createElement(d(),{href:"/dashboard",legacyBehavior:!0},m.createElement("a",{className:"navbar-brand d-flex align-items-center"},m.createElement(b(),{src:"/logo.jpeg",alt:"Logo",width:40,height:40,className:"d-inline-block align-top rounded-circle"}),m.createElement("span",{className:"ms-2 fw-bold fs-3 text-primary"},"Astrology"))),m.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},m.createElement("span",{className:"navbar-toggler-icon"})),m.createElement("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarNav"},m.createElement("ul",{className:"navbar-nav align-items-center"},m.createElement("li",{className:"nav-item"},x?m.createElement(d(),{href:"/services",legacyBehavior:!0},m.createElement("a",{className:"nav-link fw-semibold text-light"},"Services")):m.createElement(d(),{href:"/",legacyBehavior:!0},m.createElement("a",{className:"nav-link fw-semibold text-light"},"Our Services"))),m.createElement("li",{className:"nav-item"},m.createElement(d(),{href:"/bookAppointment",legacyBehavior:!0},m.createElement("a",{className:"nav-link fw-semibold text-light"},"Book Appointment "))),m.createElement("li",{className:"nav-item"},m.createElement(d(),{href:"/about",legacyBehavior:!0},m.createElement("a",{className:"nav-link fw-semibold text-light"},"About Us"))),m.createElement("li",{className:"nav-item"},m.createElement(d(),{href:"/blog",legacyBehavior:!0},m.createElement("a",{className:"nav-link fw-semibold text-light"},"Blogs"))),m.createElement("li",{className:"nav-item"},m.createElement(d(),{href:"/contactUs",legacyBehavior:!0},m.createElement("a",{className:"nav-link fw-semibold text-light"},"Contact Us"))),m.createElement("li",{className:"nav-item"},m.createElement(d(),{href:"/yourCart",legacyBehavior:!0},m.createElement("a",{className:"nav-link fw-semibold text-light"},"Cart"))),x&&m.createElement(m.Fragment,null,m.createElement("li",{className:"nav-item dropdown"},m.createElement("a",{className:"nav-link dropdown-toggle fw-semibold text-light ".concat(u?"show":""),href:"#",id:"navbarDropdown",role:"button","aria-expanded":u?"true":"false",onClick:Q},l),m.createElement("ul",{className:"dropdown-menu dropdown-menu-end border-0 shadow ".concat(u?"show":""),"aria-labelledby":"navbarDropdown"},m.createElement("li",null,m.createElement(d(),{href:"/edit-profile",legacyBehavior:!0},m.createElement("a",{className:"dropdown-item"},"Edit Profile"))),m.createElement("li",null,m.createElement("button",{className:"dropdown-item",onClick:K},"Logout")))))),m.createElement("form",{className:"d-flex ms-3"},m.createElement("input",{className:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"}),m.createElement("button",{className:"btn btn-outline-light",type:"submit"},"Search"))))),m.createElement("br",null),m.createElement("br",null),m.createElement("h1",null,"View Profile"),m.createElement("div",{className:"card mt-3 p-4"},m.createElement("p",null,m.createElement("strong",null,"Name:")," ",j.name),m.createElement("p",null,m.createElement("strong",null,"Email:")," ",j.email),m.createElement("button",{onClick:function(){return q(!0)},className:"btn btn-primary"},"Edit Profile")))}},37944:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/edit-profile",function(){return t(96616)}])}},function(e){e.O(0,[61,591,888,774,179],function(){return e(e.s=37944)}),_N_E=e.O()}]);